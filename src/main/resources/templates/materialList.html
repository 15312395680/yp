<!DOCTYPE html>
<html lang="zh" xmlns:th ="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>文章列表</title>
    <link rel="stylesheet" type="text/css" href="/css/weui.min.css"/>
    <link rel="stylesheet" type="text/css" href="/css/jquery-weui.min.css"/>
    <link rel="stylesheet" type="text/css" href="/css/index.css"/>
</head>
<body>
    <header class="demos-header">
        <h1 class="demos-title">文章列表</h1>
    </header>
    <div class="weui-panel weui-panel_access">
        <div class="weui-panel__hd">图文组合列表</div>
        <div class="weui-panel__bd" th:each="material: ${materials.items}">
            <div th:each="article, stat: *{material.content.articles}" class="article-border">
                <a th:if="${stat.index == 0}" th:data-media-id="*{material.mediaId}" th:data-num="${stat.index}" href="javascript:void(0);" onclick="gotoDetail(this);" class="weui-media-box weui-media-box_appmsg">
                    <div class="weui-media-box__hd">
                        <img class="weui-media-box__thumb" th:src="*{article.thumbUrl}" width="60" height="60">
                    </div>
                    <div class="weui-media-box__bd">
                        <h4 class="weui-media-box__title" th:text="*{article.title}"></h4>
                        <p class="weui-media-box__desc" th:text="*{article.digest}"></p>
                    </div>
                </a>
                <a th:if="${stat.index > 0}" th:data-media-id="*{material.mediaId}" th:data-num="${stat.index}" href="javascript:void(0);" onclick="gotoDetail(this);" class="weui-media-box weui-media-box_appmsg sub-article">
                    <div class="weui-media-box__bd">
                        <h4 class="weui-media-box__title" style="font-size: 12px" th:text="*{article.title}"></h4>
                    </div>
                    <div class="weui-media-box__hd sub-img">
                        <img class="weui-media-box__thumb" th:src="*{article.thumbUrl}" width="40" height="40">
                    </div>
                </a>
            </div>
        </div>
        <!--<div class="weui-panel__ft">-->
            <!--<a href="javascript:void(0);" class="weui-cell weui-cell_access weui-cell_link">-->
                <!--<div class="weui-cell__bd">查看更多</div>-->
                <!--<span class="weui-cell__ft"></span>-->
            <!--</a>-->
        <!--</div>-->
    </div>

    <script th:src="@{/js/jquery.min.js}" type="text/javascript"></script>
    <script th:src="@{/js/jquery-weui.min.js}" type="text/javascript"></script>
    <script>
        function gotoDetail(item){
            //alert($(item).data('media-id') + "  " + $(item).data('num'));
            window.location.href = '/wx/materialDetail?mediaId='+$(item).data('media-id')+'&num='+$(item).data('num');
        }
    </script>
</body>
</html>